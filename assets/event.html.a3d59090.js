import{_ as n,o as s,c as a,b as e}from"./app.ca1f7dd6.js";var t="/blog/assets/process.eed67db6.jpg";const p={},o=e(`<h2 id="\u5168\u57DF\u4E8B\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5168\u57DF\u4E8B\u4EF6" aria-hidden="true">#</a> \u5168\u57DF\u4E8B\u4EF6</h2><h3 id="\u5168\u57DF\u524D\u7F6E\u5B88\u885B" tabindex="-1"><a class="header-anchor" href="#\u5168\u57DF\u524D\u7F6E\u5B88\u885B" aria-hidden="true">#</a> \u5168\u57DF\u524D\u7F6E\u5B88\u885B</h3><p>\u4F7F\u7528 <code>router.beforeEach</code> \u8A3B\u518A\u4E00\u500B\u5168\u57DF\u524D\u7F6E\u5B88\u885B</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// \u8FD4\u56DE false \u4EE5\u53D6\u6D88\u5BFC\u822A</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6BCF\u500B\u5B88\u885B\u65B9\u6CD5\u63A5\u6536\u5169\u500B\u53C3\u6578</p><ul><li><strong>to</strong>: \u5373\u5C07\u8981\u9032\u5165\u7684\u8DEF\u7531</li><li><strong>from</strong>: \u7576\u524D\u5C0E\u822A\u6B63\u8981\u96E2\u958B\u7684\u8DEF\u7531</li><li>\u53EF\u9078\u53C3\u6578<code> next</code></li></ul><p>\u78BA\u4FDD <code>next</code> \u5728\u4EFB\u4F55\u7D66\u5B9A\u7684\u5C0E\u822A\u5B88\u885B\u4E2D\u90FD\u88AB<strong>\u56B4\u683C\u8ABF\u7528\u4E00\u6B21</strong>\u3002\u5B83\u53EF\u4EE5\u51FA\u73FE\u591A\u65BC\u4E00\u6B21\uFF0C\u4F46\u662F\u53EA\u80FD\u5728\u6240\u6709\u7684\u908F\u8F2F\u8DEF\u5F91\u90FD\u4E0D\u91CD\u758A\u7684\u60C5\u6CC1\u4E0B\uFF0C\u5426\u5247\u9264\u5B50\u6C38\u9060\u90FD\u4E0D\u6703\u88AB\u89E3\u6790\u6216\u5831\u932F</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">&#39;Login&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isAuthenticated<span class="token punctuation">)</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Login&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">else</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5168\u57DF\u89E3\u6790\u5B88\u885B" tabindex="-1"><a class="header-anchor" href="#\u5168\u57DF\u89E3\u6790\u5B88\u885B" aria-hidden="true">#</a> \u5168\u57DF\u89E3\u6790\u5B88\u885B</h3><p>\u7528 <code>router.beforeResolve</code> \u8A3B\u518A\u4E00\u500B\u5168\u57DF\u5B88\u885B\u3002\u9019\u548C <code>router.beforeEach</code> \u985E\u4F3C\uFF0C\u56E0\u70BA\u5B83\u5728 <strong>\u6BCF\u6B21\u5C0E\u822A</strong>\u6642\u90FD\u6703\u89F8\u767C\uFF0C\u4F46\u662F\u78BA\u4FDD\u5728\u5C0E\u822A\u88AB\u78BA\u8A8D\u4E4B\u524D\uFF0C<strong>\u540C\u6642\u5728\u6240\u6709\u5143\u4EF6\u5167\u5B88\u885B\u548C\u975E\u540C\u6B65\u8DEF\u7531\u5143\u4EF6\u88AB\u89E3\u6790\u4E4B\u5F8C\uFF0C\u89E3\u6790\u5B88\u885B\u5C31\u88AB\u6B63\u78BA\u8ABF\u7528</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">beforeResolve</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>requiresCamera<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">askForCameraPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">instanceof</span> <span class="token class-name">NotAllowedError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ... \u8655\u7406\u932F\u8AA4\uFF0C\u7136\u5F8C\u53D6\u6D88\u5C0E\u822A</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u610F\u6599\u4E4B\u5916\u7684\u932F\u8AA4\uFF0C\u53D6\u6D88\u5C0E\u822A\u4E26\u628A\u932F\u8AA4\u50B3\u7D66\u5168\u57DF\u8655\u7406\u5668</span>
        <span class="token keyword">throw</span> error
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5168\u57DF\u5F8C\u7F6E\u9264\u5B50" tabindex="-1"><a class="header-anchor" href="#\u5168\u57DF\u5F8C\u7F6E\u9264\u5B50" aria-hidden="true">#</a> \u5168\u57DF\u5F8C\u7F6E\u9264\u5B50</h3><p>\u4E5F\u53EF\u4EE5\u8A3B\u518A\u5168\u57DF\u5F8C\u7F6E\u9264\u5B50\uFF0C\u7136\u800C\u548C\u5B88\u885B\u4E0D\u540C\u7684\u662F\uFF0C\u9019\u4E9B\u9264\u5B50\u4E0D\u6703\u63A5\u53D7 <code>next</code> \u51FD\u6578\u4E5F\u4E0D\u6703\u6539\u8B8A\u5C0E\u822A\u672C\u8EAB\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>router.afterEach((to, from, failure) =&gt; {
  sendToAnalytics(to.fullPath)
})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E09\u500B\u53C3\u6578<code>failure</code>\u4EE3\u8868\u5C0E\u822A\u6545\u969C</p><h2 id="\u8DEF\u7531\u7368\u4EAB\u7684\u5B88\u885B" tabindex="-1"><a class="header-anchor" href="#\u8DEF\u7531\u7368\u4EAB\u7684\u5B88\u885B" aria-hidden="true">#</a> \u8DEF\u7531\u7368\u4EAB\u7684\u5B88\u885B</h2><h2 id="\u7D44\u4EF6\u5167\u7684\u5B88\u885B" tabindex="-1"><a class="header-anchor" href="#\u7D44\u4EF6\u5167\u7684\u5B88\u885B" aria-hidden="true">#</a> \u7D44\u4EF6\u5167\u7684\u5B88\u885B</h2><p>\u70BA\u8DEF\u7531\u5143\u4EF6\u6DFB\u52A0\u4EE5\u4E0B\u914D\u7F6E\uFF1A</p><ul><li><code>beforeRouteEnter</code></li><li><code>beforeRouteUpdate</code></li><li><code>beforeRouteLeave</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">beforeRouteEnter</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5728\u6E32\u67D3\u8A72\u7D44\u4EF6\u7684\u5C0D\u61C9\u8DEF\u7531\u88AB\u9A57\u8B49\u524D\u8ABF\u7528</span>
    <span class="token comment">// \u4E0D\u80FD\u7372\u53D6\u5143\u4EF6\u5BE6\u4F8B \`this\` \uFF01</span>
    <span class="token comment">// \u56E0\u70BA\u7576\u5B88\u885B\u57F7\u884C\u6642\uFF0C\u5143\u4EF6\u5BE6\u4F8B\u9084\u6C92\u88AB\u5275\u5EFA\uFF01</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteUpdate</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5728\u7576\u524D\u8DEF\u7531\u6539\u8B8A\uFF0C\u4F46\u662F\u8A72\u7D44\u4EF6\u88AB\u8986\u7528\u6642\u8ABF\u7528</span>
    <span class="token comment">// \u8209\u4F8B\u4F86\u8AAA\uFF0C\u5C0D\u65BC\u4E00\u500B\u5E36\u6709\u52D5\u614B\u53C3\u6578\u7684\u8DEF\u5F91 \`/users/:id\`\uFF0C\u5728 \`/users/1\` \u548C \`/users/2\` \u4E4B\u9593\u8DF3\u8F49\u7684\u6642\u5019\uFF0C</span>
    <span class="token comment">// \u7531\u65BC\u6703\u6E32\u67D3\u540C\u6A23\u7684 \`UserDetails\` \u5143\u4EF6\uFF0C\u56E0\u6B64\u5143\u4EF6\u5BE6\u4F8B\u6703\u88AB\u8986\u7528\u3002\u800C\u9019\u500B\u9264\u5B50\u5C31\u6703\u5728\u9019\u500B\u60C5\u6CC1\u4E0B\u88AB\u8ABF\u7528\u3002</span>
    <span class="token comment">// \u56E0\u70BA\u5728\u9019\u7A2E\u60C5\u6CC1\u767C\u751F\u7684\u6642\u5019\uFF0C\u5143\u4EF6\u5DF2\u7D93\u639B\u8F09\u597D\u4E86\uFF0C\u5C0E\u822A\u5B88\u885B\u53EF\u4EE5\u8A2A\u554F\u5143\u4EF6\u5BE6\u4F8B \`this\`</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteLeave</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5728\u5C0E\u822A\u96E2\u958B\u6E32\u67D3\u8A72\u7D44\u4EF6\u7684\u5C0D\u61C9\u8DEF\u7531\u6642\u8ABF\u7528</span>
    <span class="token comment">// \u8207 \`beforeRouteUpdate\` \u4E00\u6A23\uFF0C\u5B83\u53EF\u4EE5\u8A2A\u554F\u5143\u4EF6\u5BE6\u4F8B \`this\`</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>beforeRouteEnter</code> \u5B88\u885B <strong>\u4E0D\u80FD</strong> \u8A2A\u554F <code>$this</code>\uFF0C\u56E0\u70BA\u5B88\u885B\u5728\u5C0E\u822A\u78BA\u8A8D\u524D\u88AB\u8ABF\u7528\uFF0C\u56E0\u6B64\u5373\u5C07\u767B\u5834\u7684\u65B0\u7D44\u4EF6\u9084\u6C92\u88AB\u5275\u5EFA\u3002</p><p>\u901A\u904E\u50B3\u4E00\u500B\u56DE\u6A94\u7D66 <code>next</code> \u4F86\u8A2A\u554F\u5143\u4EF6\u5BE6\u4F8B\u3002\u5728\u5C0E\u822A\u88AB\u78BA\u8A8D\u7684\u6642\u5019\u57F7\u884C\u56DE\u6A94\uFF0C\u4E26\u4E14\u628A\u5143\u4EF6\u5BE6\u4F8B\u4F5C\u70BA\u56DE\u6A94\u65B9\u6CD5\u7684\u53C3\u6578\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">beforeRouteEnter</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">vm</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u901A\u904E \`vm\` \u8A2A\u554F\u5143\u4EF6\u5BE6\u4F8B</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C0D\u65BC <code>beforeRouteUpdate</code> \u548C <code>beforeRouteLeave</code> \u4F86\u8AAA\uFF0C<code>$this</code> \u5DF2\u7D93\u53EF\u7528\u4E86</p><h2 id="\u5B8C\u6574\u7684\u5C0E\u822A\u89E3\u6790\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u5B8C\u6574\u7684\u5C0E\u822A\u89E3\u6790\u6D41\u7A0B" aria-hidden="true">#</a> \u5B8C\u6574\u7684\u5C0E\u822A\u89E3\u6790\u6D41\u7A0B</h2><p><img src="`+t+'" alt=""></p>',26),c=[o];function i(l,u){return s(),a("div",null,c)}var d=n(p,[["render",i],["__file","event.html.vue"]]);export{d as default};

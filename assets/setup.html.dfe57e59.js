import{_ as n,o as s,c as a,b as e}from"./app.ca1f7dd6.js";const t={},p=e(`<h1 id="vue-router-\u548C\u7D44\u5408\u5F0Fapi" tabindex="-1"><a class="header-anchor" href="#vue-router-\u548C\u7D44\u5408\u5F0Fapi" aria-hidden="true">#</a> Vue Router \u548C\u7D44\u5408\u5F0FAPI</h1><h2 id="\u5728-setup-\u4E2D\u8A2A\u554F\u8DEF\u7531\u548C\u7576\u524D\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#\u5728-setup-\u4E2D\u8A2A\u554F\u8DEF\u7531\u548C\u7576\u524D\u8DEF\u7531" aria-hidden="true">#</a> \u5728 <code>setup</code> \u4E2D\u8A2A\u554F\u8DEF\u7531\u548C\u7576\u524D\u8DEF\u7531</h2><p>\u56E0\u70BA\u5728 <code>setup</code> \u88E1\u9762\u6C92\u6709\u8A2A\u554F<code>this</code>\uFF0C\u6240\u4EE5\u4E0D\u80FD\u518D\u76F4\u63A5\u8A2A\u554F <code>this.$router</code> \u6216<code>this.$route</code>\u3002\u4F5C\u70BA\u66FF\u4EE3\uFF0C\u4F7F\u7528 <code>useRouter</code> \u51FD\u6578\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter<span class="token punctuation">,</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">function</span> <span class="token function">pushWithQuery</span><span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;search&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span>route<span class="token punctuation">.</span>query<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5C0E\u822A\u5B88\u885B" tabindex="-1"><a class="header-anchor" href="#\u5C0E\u822A\u5B88\u885B" aria-hidden="true">#</a> \u5C0E\u822A\u5B88\u885B</h2><p>\u4ECD\u7136\u53EF\u4EE5\u901A\u904E <code>setup</code> \u51FD\u6578\u4F86\u4F7F\u7528\u7D44\u4EF6\u5167\u7684\u5C0E\u822A\u5B88\u885B\uFF0C\u4F46Vue Router \u5C07\u66F4\u65B0\u548C\u96E2\u958B\u5B88\u885B\u4F5C\u70BA\u7D44\u5408\u5F0FAPI \u51FD\u6578\u516C\u958B</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> onBeforeRouteLeave<span class="token punctuation">,</span> onBeforeRouteUpdate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u4E0E beforeRouteLeave \u76F8\u540C\uFF0C\u65E0\u6CD5\u8BBF\u95EE \`this\`</span>
    <span class="token function">onBeforeRouteLeave</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// \u4E0E beforeRouteUpdate \u76F8\u540C\uFF0C\u65E0\u6CD5\u8BBF\u95EE \`this\`</span>
    <span class="token function">onBeforeRouteUpdate</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),o=[p];function c(u,i){return s(),a("div",null,o)}var r=n(t,[["render",c],["__file","setup.html.vue"]]);export{r as default};
